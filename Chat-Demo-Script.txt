SignalR Chat App Demo Script
----------------------------

1.  Open the Chat.sln solution in the Chat-Begin folder
2.  Right-click the project and select Add -> New Item
3.  From the New Item dialog, select "SignalR Hub Class" and name the file "ChatHub.cs"
4.  Note the addition of some script files and new references to Microsoft.AspNet.SignalR.*
5.  Replace the code in the ChatHub.cs file with the code below.

[HubName("chat")]
public class ChatHub : Hub
{
    public void SendMessage(dynamic message)
    {
        Clients.All.onReceiveMessage(message);
    }
}

6.  Right-click the Controllers folder and select Add > Controller
7.  Name the controller HomeController and select "Empty MVC Controller" from the menu
8.  Right-click within the Index method and select "Add View"
9.  Select the _Layout.cshtml file as the layout for the view
10. Change the Index.cshtml view file to include the following code:

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Chat</h2>

<div id="connectionStatus">Waiting</div>

<!-- insert form here -->

@section scripts{

    <script src="~/Scripts/jquery.signalR-1.0.0-alpha1.js"></script>

    <script type="text/javascript">
        $(function () {
            var cn = $.hubConnection();
            var hub = cn.createHubProxy('chat');

            // TODO: set up the event handler

            // TODO: set up the push button event handler

            cn.start().done(function () {
                $('#connectionStatus').text('Connected');
            });
        });
    </script>
}

11. Replace the <!-- insert form here --> comment with the code below

<div>
    <label>Username</label>
    <input type="text" id="username" value="someuser" />
</div>
<div>
    <label>Message</label>
    <input type="text" id="message" value="Hello World!" />
</div>
<div>
    <button id="send">Send</button>
</div>

<ul id="messages"></ul>

12. Replace the // TODO: set up the event handler comment with the code below

hub.on('onReceiveMessage', function (msg) {
    $('#messages').prepend('<li><b>' + msg.username + '</b>: ' + msg.message + '</li>');
});

13. Replace the // TODO: set up the push button event handler comment with the code below

$('#send').click(function () {
    hub.invoke('sendMessage', { username: $('#username').val(), message: $('#message').val() });
});

14. Run the site
15. Open a second browser instance
16. Chat with yourself